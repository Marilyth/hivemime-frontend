(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30525,e=>{"use strict";e.s(["default",()=>ey],30525);var l=e.i(43476),t=e.i(15288),a=e.i(27612),n=e.i(19455),o=e.i(87675),i=e.i(10204),r=e.i(93479),s=e.i(75157);function d(e){let{className:t,...a}=e;return(0,l.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}function c(e){let{label:t,isRequired:a,...n}=e;return(0,l.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,l.jsxs)(i.Label,{htmlFor:n.id,children:[t,a&&(0,l.jsx)("span",{className:"text-honey-brown",children:"*"})]}),(0,l.jsx)(r.Input,{maxLength:200,...n})]})}function u(e){let{label:t,isRequired:a,...n}=e;return(0,l.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,l.jsxs)(i.Label,{htmlFor:n.id,children:[t,a&&(0,l.jsx)("span",{className:"text-honey-brown",children:"*"})]}),(0,l.jsx)(d,{maxLength:2e3,...n})]})}e.i(71470);var p=e.i(41721),m=e.i(72436),x=e.i(48800),h=e.i(85272);let v=(0,p.observer)(e=>{let{poll:t}=e,a=[{value:o.PollType.SingleChoice,description:"The user has to pick one out of several candidates."},{value:o.PollType.MultipleChoice,description:"The user has to pick one or more out of several candidates."},{value:o.PollType.Rating,description:"The user has to assign each candidate a numerical value within a specified range."},{value:o.PollType.Ranking,description:"The user has to rank the candidates in order of preference. (E.g. top 10 lists)"},{value:o.PollType.Categorization,description:"The user has to assign a category to each candidate. (E.g. tier lists)"}];return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Choose the type of poll you wish to create."}),a.map((e,a)=>(0,l.jsxs)(x.HiveMimeHoverCard,{className:"flex flex-row cursor-pointer hover:text-honey-brown",onClick:()=>t.pollType=e.value,children:[(0,l.jsx)(h.HiveMimePollTypeIcon,{answerType:e.value,className:"mr-2 text-gray-500 w-8"}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,l.jsx)("span",{children:e.value}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:e.description})]})]},a))]})});var f=e.i(71645);let g=(0,p.observer)(e=>{let{className:t,...a}=e;return(0,l.jsx)(r.Input,{className:"!bg-transparent !ring-offset-transparent border-0 shadow-none focus-visible:ring-0 p-0 ".concat(t),...a})}),j=(0,p.observer)(e=>{let{className:t,...a}=e;return(0,l.jsx)(r.Input,{className:"text-honey-brown !bg-transparent !ring-offset-transparent border-0 shadow-none focus-visible:ring-0 p-0 mx-1.5 text-center rounded-none border-b-1 border-honey-brown p-0 h-auto w-auto ".concat(t),...a})});function b(e){let{index:t,onIndexChange:a}=e,[n,o]=(0,f.useState)(t);return(0,l.jsx)("div",{className:"flex flex-row items-center justify-center",children:(0,l.jsx)(g,{className:"p-0 w-6 h-auto text-gray-500",value:n,onChange:e=>{var l;o(l=Math.max(1,l=Number(e.target.value))),null==a||a(l)}})})}var w=e.i(7233);let y=(0,p.observer)(e=>{let{poll:t}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(i.Label,{children:"Candidates"}),(0,l.jsx)("div",{className:"flex flex-col gap-0.5",children:t.candidates.map((e,i)=>(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(N,{option:e,index:i,onIndexChange:e=>(function(e,l){if(l<0||l>=t.candidates.length)return;let[a]=t.candidates.splice(e,1);t.candidates.splice(l,0,a)})(i,e)})}),(0,l.jsx)(n.Button,{variant:"ghost",className:"ml-2 text-muted-foreground hover:text-red-400",onClick:()=>{t.candidates.splice(i,1),t.pollType!=o.PollType.Rating&&t.candidates.length+1==t.maxValue&&t.maxValue--},children:(0,l.jsx)(a.Trash2,{})})]},i))}),(0,l.jsxs)(n.Button,{variant:"outline",onClick:function(){t.candidates.push({name:"Candidate ".concat(t.candidates.length+1),description:""}),t.pollType!=o.PollType.Rating&&t.candidates.length-1==t.maxValue&&(t.maxValue=t.candidates.length),console.log(t.maxValue)},children:[(0,l.jsx)(w.Plus,{}),"Add candidate"]})]})}),N=(0,p.observer)(e=>{let{index:t,option:a,onIndexChange:n}=e;return(0,l.jsxs)(x.HiveMimeHoverCard,{className:"flex flex-row gap-2",children:[(0,l.jsx)(b,{index:t,onIndexChange:e=>null==n?void 0:n(e)}),(0,l.jsx)(g,{className:"h-auto",value:a.name,onChange:e=>a.name=e.target.value})]})}),C=(0,p.observer)(e=>{var t;return(0,f.useEffect)(()=>{console.log("Validating single choice poll",e.poll),e.validation.isValid=!0,e.validation.errors=[],(!e.poll.candidates||e.poll.candidates.length<2)&&(e.validation.isValid=!1,e.validation.errors.push("A choice poll must have at least two candidates."))},[null==(t=e.poll.candidates)?void 0:t.length]),(0,l.jsx)(y,{poll:e.poll})}),T=(0,p.observer)(e=>{var t,a;return(0,f.useEffect)(()=>{e.validation.isValid=!0,e.validation.errors=[],(!e.poll.candidates||e.poll.candidates.length<2)&&(e.validation.isValid=!1,e.validation.errors.push("A choice poll must have at least two candidates.")),console.log(e.poll.maxVotes)},[null==(t=e.poll.candidates)?void 0:t.length,e.poll.maxVotes]),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"items-center text-muted-foreground",children:["The user can pick up to",(0,l.jsx)(j,{max:null==(a=e.poll.candidates)?void 0:a.length,min:1,value:e.poll.maxVotes,className:"w-5",onChange:l=>e.poll.maxVotes=Number(l.target.value)}),"candidates."]}),(0,l.jsx)(y,{poll:e.poll})]})}),P=(0,p.observer)(e=>{var t;return(0,f.useEffect)(()=>{e.validation.isValid=!0,e.validation.errors=[],(!e.poll.candidates||e.poll.candidates.length<2)&&(e.validation.isValid=!1,e.validation.errors.push("A ranking poll must have at least two candidates."))},[null==(t=e.poll.candidates)?void 0:t.length]),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"items-center text-muted-foreground",children:["The user has to rank at least",(0,l.jsx)(j,{min:1,value:e.poll.minVotes,className:"w-5",onChange:l=>e.poll.minVotes=Number(l.target.value)}),"candidates."]}),(0,l.jsx)(y,{poll:e.poll})]})});var S=e.i(70152),V=e.i(81140),R=e.i(20783),E=e.i(30030),k=e.i(69340),D=e.i(86318),M=e.i(35804),A=e.i(48425),H=e.i(75830),I=["PageUp","PageDown"],z=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_="Slider",[B,K,U]=(0,H.createCollection)(_),[O,F]=(0,E.createContextScope)(_,[U]),[q,X]=O(_),Y=f.forwardRef((e,t)=>{let{name:a,min:n=0,max:o=100,step:i=1,orientation:r="horizontal",disabled:s=!1,minStepsBetweenThumbs:d=0,defaultValue:c=[n],value:u,onValueChange:p=()=>{},onValueCommit:m=()=>{},inverted:x=!1,form:h,...v}=e,g=f.useRef(new Set),j=f.useRef(0),b="horizontal"===r,[w=[],y]=(0,k.useControllableState)({prop:u,defaultProp:c,onChange:e=>{var l;null==(l=[...g.current][j.current])||l.focus(),p(e)}}),N=f.useRef(w);function C(e,l){let{commit:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1},a=(String(i).split(".")[1]||"").length,r=function(e,l){let t=Math.pow(10,l);return Math.round(e*t)/t}(Math.round((e-n)/i)*i+n,a),s=(0,S.clamp)(r,[n,o]);y(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=[...e];return a[t]=l,a.sort((e,l)=>e-l)}(e,s,l);if(!function(e,l){if(l>0)return Math.min(...e.slice(0,-1).map((l,t)=>e[t+1]-l))>=l;return!0}(a,d*i))return e;{j.current=a.indexOf(s);let l=String(a)!==String(e);return l&&t&&m(a),l?a:e}})}return(0,l.jsx)(q,{scope:e.__scopeSlider,name:a,disabled:s,min:n,max:o,valueIndexToChangeRef:j,thumbs:g.current,values:w,orientation:r,form:h,children:(0,l.jsx)(B.Provider,{scope:e.__scopeSlider,children:(0,l.jsx)(B.Slot,{scope:e.__scopeSlider,children:(0,l.jsx)(b?J:W,{"aria-disabled":s,"data-disabled":s?"":void 0,...v,ref:t,onPointerDown:(0,V.composeEventHandlers)(v.onPointerDown,()=>{s||(N.current=w)}),min:n,max:o,inverted:x,onSlideStart:s?void 0:function(e){let l=function(e,l){if(1===e.length)return 0;let t=e.map(e=>Math.abs(e-l)),a=Math.min(...t);return t.indexOf(a)}(w,e);C(e,l)},onSlideMove:s?void 0:function(e){C(e,j.current)},onSlideEnd:s?void 0:function(){let e=N.current[j.current];w[j.current]!==e&&m(w)},onHomeKeyDown:()=>!s&&C(n,0,{commit:!0}),onEndKeyDown:()=>!s&&C(o,w.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:l,direction:t}=e;if(!s){let e=I.includes(l.key)||l.shiftKey&&z.includes(l.key),a=j.current;C(w[a]+i*(e?10:1)*t,a,{commit:!0})}}})})})})});Y.displayName=_;var[Q,G]=O(_,{startEdge:"left",endEdge:"right",size:"width",direction:1}),J=f.forwardRef((e,t)=>{let{min:a,max:n,dir:o,inverted:i,onSlideStart:r,onSlideMove:s,onSlideEnd:d,onStepKeyDown:c,...u}=e,[p,m]=f.useState(null),x=(0,R.useComposedRefs)(t,e=>m(e)),h=f.useRef(void 0),v=(0,D.useDirection)(o),g="ltr"===v,j=g&&!i||!g&&i;function b(e){let l=h.current||p.getBoundingClientRect(),t=es([0,l.width],j?[a,n]:[n,a]);return h.current=l,t(e-l.left)}return(0,l.jsx)(Q,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:(0,l.jsx)(Z,{dir:v,"data-orientation":"horizontal",...u,ref:x,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let l=b(e.clientX);null==r||r(l)},onSlideMove:e=>{let l=b(e.clientX);null==s||s(l)},onSlideEnd:()=>{h.current=void 0,null==d||d()},onStepKeyDown:e=>{let l=L[j?"from-left":"from-right"].includes(e.key);null==c||c({event:e,direction:l?-1:1})}})})}),W=f.forwardRef((e,t)=>{let{min:a,max:n,inverted:o,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onStepKeyDown:d,...c}=e,u=f.useRef(null),p=(0,R.useComposedRefs)(t,u),m=f.useRef(void 0),x=!o;function h(e){let l=m.current||u.current.getBoundingClientRect(),t=es([0,l.height],x?[n,a]:[a,n]);return m.current=l,t(e-l.top)}return(0,l.jsx)(Q,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:(0,l.jsx)(Z,{"data-orientation":"vertical",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let l=h(e.clientY);null==i||i(l)},onSlideMove:e=>{let l=h(e.clientY);null==r||r(l)},onSlideEnd:()=>{m.current=void 0,null==s||s()},onStepKeyDown:e=>{let l=L[x?"from-bottom":"from-top"].includes(e.key);null==d||d({event:e,direction:l?-1:1})}})})}),Z=f.forwardRef((e,t)=>{let{__scopeSlider:a,onSlideStart:n,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:r,onEndKeyDown:s,onStepKeyDown:d,...c}=e,u=X(_,a);return(0,l.jsx)(A.Primitive.span,{...c,ref:t,onKeyDown:(0,V.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(r(e),e.preventDefault()):"End"===e.key?(s(e),e.preventDefault()):I.concat(z).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:(0,V.composeEventHandlers)(e.onPointerDown,e=>{let l=e.target;l.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(l)?l.focus():n(e)}),onPointerMove:(0,V.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&o(e)}),onPointerUp:(0,V.composeEventHandlers)(e.onPointerUp,e=>{let l=e.target;l.hasPointerCapture(e.pointerId)&&(l.releasePointerCapture(e.pointerId),i(e))})})}),$="SliderTrack",ee=f.forwardRef((e,t)=>{let{__scopeSlider:a,...n}=e,o=X($,a);return(0,l.jsx)(A.Primitive.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...n,ref:t})});ee.displayName=$;var el="SliderRange",et=f.forwardRef((e,t)=>{let{__scopeSlider:a,...n}=e,o=X(el,a),i=G(el,a),r=f.useRef(null),s=(0,R.useComposedRefs)(t,r),d=o.values.length,c=o.values.map(e=>er(e,o.min,o.max)),u=d>1?Math.min(...c):0,p=100-Math.max(...c);return(0,l.jsx)(A.Primitive.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...n,ref:s,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:p+"%"}})});et.displayName=el;var ea="SliderThumb",en=f.forwardRef((e,t)=>{let a=K(e.__scopeSlider),[n,o]=f.useState(null),i=(0,R.useComposedRefs)(t,e=>o(e)),r=f.useMemo(()=>n?a().findIndex(e=>e.ref.current===n):-1,[a,n]);return(0,l.jsx)(eo,{...e,ref:i,index:r})}),eo=f.forwardRef((e,t)=>{let{__scopeSlider:a,index:n,name:o,...i}=e,r=X(ea,a),s=G(ea,a),[d,c]=f.useState(null),u=(0,R.useComposedRefs)(t,e=>c(e)),p=!d||r.form||!!d.closest("form"),m=(0,M.useSize)(d),x=r.values[n],h=void 0===x?0:er(x,r.min,r.max),v=function(e,l){return l>2?"Value ".concat(e+1," of ").concat(l):2===l?["Minimum","Maximum"][e]:void 0}(n,r.values.length),g=null==m?void 0:m[s.size],j=g?function(e,l,t){let a=e/2,n=es([0,50],[0,a]);return(a-n(l)*t)*t}(g,h,s.direction):0;return f.useEffect(()=>{if(d)return r.thumbs.add(d),()=>{r.thumbs.delete(d)}},[d,r.thumbs]),(0,l.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:"calc(".concat(h,"% + ").concat(j,"px)")},children:[(0,l.jsx)(B.ItemSlot,{scope:e.__scopeSlider,children:(0,l.jsx)(A.Primitive.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":r.min,"aria-valuenow":x,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0,...i,ref:u,style:void 0===x?{display:"none"}:e.style,onFocus:(0,V.composeEventHandlers)(e.onFocus,()=>{r.valueIndexToChangeRef.current=n})})}),p&&(0,l.jsx)(ei,{name:null!=o?o:r.name?r.name+(r.values.length>1?"[]":""):void 0,form:r.form,value:x},n)]})});en.displayName=ea;var ei=f.forwardRef((e,t)=>{let{__scopeSlider:a,value:n,...o}=e,i=f.useRef(null),r=(0,R.useComposedRefs)(i,t),s=function(e){let l=f.useRef({value:e,previous:e});return f.useMemo(()=>(l.current.value!==e&&(l.current.previous=l.current.value,l.current.value=e),l.current.previous),[e])}(n);return f.useEffect(()=>{let e=i.current;if(!e)return;let l=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(s!==n&&l){let t=new Event("input",{bubbles:!0});l.call(e,n),e.dispatchEvent(t)}},[s,n]),(0,l.jsx)(A.Primitive.input,{style:{display:"none"},...o,ref:r,defaultValue:n})});function er(e,l,t){return(0,S.clamp)(100/(t-l)*(e-l),[0,100])}function es(e,l){return t=>{if(e[0]===e[1]||l[0]===l[1])return l[0];let a=(l[1]-l[0])/(e[1]-e[0]);return l[0]+a*(t-e[0])}}function ed(e){let{className:t,defaultValue:a,value:n,min:o=0,max:i=100,...r}=e,d=f.useMemo(()=>Array.isArray(n)?n:Array.isArray(a)?a:[o,i],[n,a,o,i]);return(0,l.jsxs)(Y,{"data-slot":"slider",defaultValue:a,value:n,min:o,max:i,className:(0,s.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...r,children:[(0,l.jsx)(ee,{"data-slot":"slider-track",className:(0,s.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,l.jsx)(et,{"data-slot":"slider-range",className:(0,s.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,t)=>(0,l.jsx)(en,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}ei.displayName="RadioBubbleInput";let ec=(0,p.observer)(e=>{var t;let[a,n]=(0,f.useState)(1);return(0,f.useEffect)(()=>{e.validation.isValid=!0,e.validation.errors=[],(!e.poll.candidates||e.poll.candidates.length<1)&&(e.validation.isValid=!1,e.validation.errors.push("A scoring poll must have at least one candidate."))},[null==(t=e.poll.candidates)?void 0:t.length]),(0,l.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"items-center text-muted-foreground",children:["The user has to score candidates from",(0,l.jsx)(j,{min:1,value:e.poll.minValue,className:"w-5",onChange:l=>e.poll.minValue=Number(l.target.value)}),"to",(0,l.jsx)(j,{min:1,value:e.poll.maxValue,className:"w-5",onChange:l=>e.poll.maxValue=Number(l.target.value)}),"in steps of",(0,l.jsx)(j,{min:1,value:e.poll.stepValue,className:"w-5",onChange:l=>e.poll.stepValue=Number(l.target.value)}),"."]}),(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)(i.Label,{className:"flex-1 text-gray-500 text-sm",children:"Example"}),(0,l.jsx)(i.Label,{className:"text-gray-500 text-sm",children:a})]}),(0,l.jsx)(ed,{min:e.poll.minValue,max:e.poll.maxValue,step:e.poll.stepValue,onValueChange:e=>n(e[0])})]}),(0,l.jsx)(y,{poll:e.poll})]})}),eu=(0,p.observer)(e=>{let{poll:t}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(i.Label,{children:"Categories"}),(0,l.jsx)("div",{className:"flex flex-col gap-0.5",children:t.categories.map((e,o)=>(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(ep,{category:e,index:o,onIndexChange:e=>(function(e,l){if(l<0||l>=t.candidates.length)return;let[a]=t.categories.splice(e,1);t.categories.splice(l,0,a)})(o,e)})}),(0,l.jsx)(n.Button,{variant:"ghost",className:"ml-2 text-muted-foreground hover:text-red-400",onClick:()=>{t.categories.splice(o,1)},children:(0,l.jsx)(a.Trash2,{})})]},o))}),(0,l.jsxs)(n.Button,{variant:"outline",onClick:function(){var e;null==(e=t.categories)||e.push({name:"Category ".concat(t.categories.length+1),description:""})},children:[(0,l.jsx)(w.Plus,{}),"Add category"]})]})}),ep=(0,p.observer)(e=>{let{index:t,category:a,onIndexChange:n}=e;return(0,l.jsxs)(x.HiveMimeHoverCard,{className:"flex flex-row gap-2",children:[(0,l.jsx)(b,{index:t,onIndexChange:e=>null==n?void 0:n(e)}),(0,l.jsx)(g,{className:"h-auto",value:a.name,onChange:e=>a.name=e.target.value})]})}),em=(0,p.observer)(e=>{var t;return(0,f.useEffect)(()=>{e.validation.isValid=!0,e.validation.errors=[],(!e.poll.candidates||e.poll.candidates.length<1)&&(e.validation.isValid=!1,e.validation.errors.push("A categorization poll must have at least one candidate.")),(!e.poll.categories||e.poll.categories.length<2)&&(e.validation.isValid=!1,e.validation.errors.push("A categorization poll must have at least two categories."))},[null==(t=e.poll.candidates)?void 0:t.length]),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(eu,{poll:e.poll}),(0,l.jsx)(y,{poll:e.poll})]})}),ex=(0,p.observer)(e=>{(0,f.useEffect)(()=>{e.validation.isValid=!0,e.validation.errors=[],void 0===e.poll.pollType&&(e.validation.isValid=!1,e.validation.errors=["A poll type must be selected."])},[e.poll.pollType]);let t={[o.PollType.SingleChoice]:(0,l.jsx)(C,{validation:e.validation,poll:e.poll}),[o.PollType.MultipleChoice]:(0,l.jsx)(T,{validation:e.validation,poll:e.poll}),[o.PollType.Rating]:(0,l.jsx)(ec,{validation:e.validation,poll:e.poll}),[o.PollType.Ranking]:(0,l.jsx)(P,{validation:e.validation,poll:e.poll}),[o.PollType.Categorization]:(0,l.jsx)(em,{validation:e.validation,poll:e.poll})};return(0,l.jsx)("div",{children:void 0==e.poll.pollType&&(0,l.jsx)(v,{poll:e.poll})||(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-end",children:[(0,l.jsx)(c,{label:"Question",placeholder:"My poll's title",value:e.poll.title,onChange:l=>e.poll.title=l.target.value}),(0,l.jsx)(n.Button,{disabled:!e.canDelete,variant:"ghost",className:"text-muted-foreground hover:text-red-400",onClick:e.onDeleteRequested,children:(0,l.jsx)(a.Trash2,{})})]}),(0,l.jsx)(u,{label:"Description",placeholder:"My poll's description",value:e.poll.description,onChange:l=>e.poll.description=l.target.value}),(0,l.jsxs)("div",{className:"flex flex-row items-center mt-8",children:[(0,l.jsx)(m.Separator,{className:"flex-1"}),(0,l.jsxs)(n.Button,{variant:"link",className:"border-1 cursor-pointer text-honey-brown",onClick:()=>e.poll.pollType=void 0,children:[(0,l.jsx)(h.HiveMimePollTypeIcon,{answerType:e.poll.pollType}),e.poll.pollType]}),(0,l.jsx)(m.Separator,{className:"flex-1"})]}),t[e.poll.pollType]]})})});var eh=e.i(24808),ev=e.i(53642),ef=e.i(73741),eg=e.i(18566),ej=e.i(87444),eb=e.i(46696);let ew=(0,p.observer)(()=>{let e=(0,f.useContext)(ev.HiveMimeApiContext),[a,o]=(0,f.useState)("1"),i=(0,f.useRef)((0,ej.observable)([])).current,r=(0,f.useRef)((0,ej.observable)({title:"",description:"",polls:[]})).current;function s(){var e;i.push({isValid:!1,errors:[]}),null==(e=r.polls)||e.push({title:"",description:"",candidates:[],categories:[],minValue:1,maxValue:1,minVotes:1,maxVotes:1,stepValue:1,pollType:void 0}),o("".concat(r.polls.length))}async function d(){(function(){let e=[];(void 0==r.title||""===r.title.trim())&&e.push("A post must have a title.");for(let l=0;l<i.length;l++)i[l].isValid||e.push("Poll ".concat(l+1,": ").concat(i[l].errors.join(", ")));if(e.length>0)for(let l=0;l<e.length;l++)eb.toast.error(e[l]);return 0===e.length})()&&(await e.api.postCreateCreate(r),eb.toast.success("Post created successfully!"),(0,eg.redirect)("/home"))}return 0===r.polls.length&&s(),(0,l.jsxs)(t.Card,{className:"py-4 text-foreground",children:[(0,l.jsx)(t.CardHeader,{children:(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Create new post"})}),(0,l.jsx)(t.CardContent,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(c,{isRequired:!0,label:"Title",placeholder:"My title",value:r.title,onChange:e=>r.title=e.target.value}),(0,l.jsx)(u,{label:"Description",placeholder:"My description",value:r.description,onChange:e=>r.description=e.target.value}),(0,l.jsx)(m.Separator,{className:"mt-8",orientation:"horizontal"}),(0,l.jsx)(ef.Label,{children:"Polls"}),(0,l.jsxs)(eh.EmbeddedTabs,{value:a,onValueChange:o,children:[(0,l.jsx)(eh.EmbeddedTabsList,{actionComponent:(0,l.jsxs)(n.Button,{variant:"outline",className:"rounded-b-none border-b-0",onClick:s,children:[(0,l.jsx)(w.Plus,{}),"Add"]}),children:r.polls.map((e,t)=>(0,l.jsx)(eh.EmbeddedTabsTrigger,{className:"".concat(i[t].isValid?"":"text-red-500"),value:"".concat(t+1),children:t+1},t))}),r.polls.map((e,t)=>(0,l.jsx)(eh.EmbeddedTabsContent,{value:"".concat(t+1),children:(0,l.jsx)(ex,{validation:i[t],poll:e,canDelete:r.polls.length>1,onDeleteRequested:()=>(function(e){var l;null==(l=r.polls)||l.splice(e,1),i.splice(e,1),e>=r.polls.length&&o("".concat(e))})(t)})},t))]})]})}),(0,l.jsx)(t.CardFooter,{children:(0,l.jsx)(n.Button,{onClick:d,children:"Submit"})})]})});function ey(){return(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("div",{className:"w-full max-w-183 flex flex-col gap-4",children:(0,l.jsx)(ew,{})})})}}]);