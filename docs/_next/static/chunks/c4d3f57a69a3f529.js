(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81789,e=>{"use strict";e.s(["default",()=>eY],81789);var t=e.i(43476),a=e.i(15288),r=e.i(75254);let l=(0,r.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),o=(0,r.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),n=(0,r.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),i=(0,r.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),s=(0,r.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),d=(0,r.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var c=e.i(91918),u=e.i(25913),m=e.i(75157);let x=(0,u.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function p(e){let{className:a,variant:r,asChild:l=!1,...o}=e,n=l?c.Slot:"span";return(0,t.jsx)(n,{"data-slot":"badge",className:(0,m.cn)(x({variant:r}),a),...o})}var v=e.i(87675);e.i(71470);var f=e.i(41721);let g=(0,r.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var h=e.i(48800),b=e.i(46932);let y=(0,f.observer)(e=>{let{vote:a,candidate:r,onClick:l}=e;function o(){return 1==a.value}return(0,t.jsxs)(h.HiveMimeHoverCard,{className:"flex flex-row items-center cursor-pointer ".concat(o()?"bg-honey-brown/20":"hover:text-honey-brown"),onClick:l,children:[o()&&(0,t.jsx)("span",{className:"w-6 font-light text-gray-500",children:(0,t.jsx)(g,{className:"w-4 h-4"})}),(0,t.jsx)(b.motion.div,{layout:!0,children:r.name})]})}),j=(0,f.observer)(e=>{let{poll:a,pollVotes:r}=e;return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Please pick 1 option"}),a.candidates.map((e,a)=>(0,t.jsx)(y,{vote:r.candidates[a],candidate:e,onClick:()=>(function(e){let t=r.candidates[e];1==(null==t?void 0:t.value)?t.value=null:t.value=1;for(let t=0;t<r.candidates.length;t++)t!==e&&(r.candidates[t].value=null)})(a)},a))]})});var w=e.i(85272),C=e.i(40141);function N(e){return(0,C.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M168.531 215.469l-29.864 29.864 96 96L448 128l-29.864-29.864-183.469 182.395-66.136-65.062zm236.802 189.864H106.667V106.667H320V64H106.667C83.198 64 64 83.198 64 106.667v298.666C64 428.802 83.198 448 106.667 448h298.666C428.802 448 448 428.802 448 405.333V234.667h-42.667v170.666z"},child:[]}]})(e)}let D=(0,f.observer)(e=>{let{vote:a,candidate:r,onClick:l}=e;function o(){return 1==a.value}return(0,t.jsxs)(h.HiveMimeHoverCard,{className:"flex flex-row items-center cursor-pointer ".concat(o()?"bg-honey-brown/20":"hover:text-honey-brown"),onClick:l,children:[o()&&(0,t.jsx)("span",{className:"w-6 font-light text-gray-500",children:(0,t.jsx)(N,{className:"w-4 h-4"})}),(0,t.jsx)(b.motion.div,{layout:!0,children:r.name})]})}),k=(0,f.observer)(e=>{let{poll:a,pollVotes:r}=e;return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("span",{className:"text-gray-500 text-sm",children:["Please pick between ",a.minVotes," and ",a.maxVotes," options"]}),a.candidates.map((e,a)=>(0,t.jsx)(D,{vote:r.candidates[a],candidate:e,onClick:()=>(function(e){let t=r.candidates[e];1==(null==t?void 0:t.value)?t.value=null:t.value=1})(a)},a))]})});var R=e.i(71645),S=e.i(70152),H=e.i(81140),P=e.i(20783),M=e.i(30030),I=e.i(69340),T=e.i(86318),E=e.i(99682),V=e.i(35804),z=e.i(48425),A=e.i(75830),_=["PageUp","PageDown"],L=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],O={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},U="Slider",[B,K,F]=(0,A.createCollection)(U),[Y,q]=(0,M.createContextScope)(U,[F]),[G,X]=Y(U),W=R.forwardRef((e,a)=>{let{name:r,min:l=0,max:o=100,step:n=1,orientation:i="horizontal",disabled:s=!1,minStepsBetweenThumbs:d=0,defaultValue:c=[l],value:u,onValueChange:m=()=>{},onValueCommit:x=()=>{},inverted:p=!1,form:v,...f}=e,g=R.useRef(new Set),h=R.useRef(0),b="horizontal"===i,[y=[],j]=(0,I.useControllableState)({prop:u,defaultProp:c,onChange:e=>{var t;null==(t=[...g.current][h.current])||t.focus(),m(e)}}),w=R.useRef(y);function C(e,t){let{commit:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1},r=(String(n).split(".")[1]||"").length,i=function(e,t){let a=Math.pow(10,t);return Math.round(e*a)/a}(Math.round((e-l)/n)*n+l,r),s=(0,S.clamp)(i,[l,o]);j(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=[...e];return r[a]=t,r.sort((e,t)=>e-t)}(e,s,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,a)=>e[a+1]-t))>=t;return!0}(r,d*n))return e;{h.current=r.indexOf(s);let t=String(r)!==String(e);return t&&a&&x(r),t?r:e}})}return(0,t.jsx)(G,{scope:e.__scopeSlider,name:r,disabled:s,min:l,max:o,valueIndexToChangeRef:h,thumbs:g.current,values:y,orientation:i,form:v,children:(0,t.jsx)(B.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(B.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(b?Z:$,{"aria-disabled":s,"data-disabled":s?"":void 0,...f,ref:a,onPointerDown:(0,H.composeEventHandlers)(f.onPointerDown,()=>{s||(w.current=y)}),min:l,max:o,inverted:p,onSlideStart:s?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let a=e.map(e=>Math.abs(e-t)),r=Math.min(...a);return a.indexOf(r)}(y,e);C(e,t)},onSlideMove:s?void 0:function(e){C(e,h.current)},onSlideEnd:s?void 0:function(){let e=w.current[h.current];y[h.current]!==e&&x(y)},onHomeKeyDown:()=>!s&&C(l,0,{commit:!0}),onEndKeyDown:()=>!s&&C(o,y.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:a}=e;if(!s){let e=_.includes(t.key)||t.shiftKey&&L.includes(t.key),r=h.current;C(y[r]+n*(e?10:1)*a,r,{commit:!0})}}})})})})});W.displayName=U;var[J,Q]=Y(U,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Z=R.forwardRef((e,a)=>{let{min:r,max:l,dir:o,inverted:n,onSlideStart:i,onSlideMove:s,onSlideEnd:d,onStepKeyDown:c,...u}=e,[m,x]=R.useState(null),p=(0,P.useComposedRefs)(a,e=>x(e)),v=R.useRef(void 0),f=(0,T.useDirection)(o),g="ltr"===f,h=g&&!n||!g&&n;function b(e){let t=v.current||m.getBoundingClientRect(),a=ec([0,t.width],h?[r,l]:[l,r]);return v.current=t,a(e-t.left)}return(0,t.jsx)(J,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:(0,t.jsx)(ee,{dir:f,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=b(e.clientX);null==i||i(t)},onSlideMove:e=>{let t=b(e.clientX);null==s||s(t)},onSlideEnd:()=>{v.current=void 0,null==d||d()},onStepKeyDown:e=>{let t=O[h?"from-left":"from-right"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}})})}),$=R.forwardRef((e,a)=>{let{min:r,max:l,inverted:o,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onStepKeyDown:d,...c}=e,u=R.useRef(null),m=(0,P.useComposedRefs)(a,u),x=R.useRef(void 0),p=!o;function v(e){let t=x.current||u.current.getBoundingClientRect(),a=ec([0,t.height],p?[l,r]:[r,l]);return x.current=t,a(e-t.top)}return(0,t.jsx)(J,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:(0,t.jsx)(ee,{"data-orientation":"vertical",...c,ref:m,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=v(e.clientY);null==n||n(t)},onSlideMove:e=>{let t=v(e.clientY);null==i||i(t)},onSlideEnd:()=>{x.current=void 0,null==s||s()},onStepKeyDown:e=>{let t=O[p?"from-bottom":"from-top"].includes(e.key);null==d||d({event:e,direction:t?-1:1})}})})}),ee=R.forwardRef((e,a)=>{let{__scopeSlider:r,onSlideStart:l,onSlideMove:o,onSlideEnd:n,onHomeKeyDown:i,onEndKeyDown:s,onStepKeyDown:d,...c}=e,u=X(U,r);return(0,t.jsx)(z.Primitive.span,{...c,ref:a,onKeyDown:(0,H.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(s(e),e.preventDefault()):_.concat(L).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:(0,H.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():l(e)}),onPointerMove:(0,H.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&o(e)}),onPointerUp:(0,H.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),n(e))})})}),et="SliderTrack",ea=R.forwardRef((e,a)=>{let{__scopeSlider:r,...l}=e,o=X(et,r);return(0,t.jsx)(z.Primitive.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...l,ref:a})});ea.displayName=et;var er="SliderRange",el=R.forwardRef((e,a)=>{let{__scopeSlider:r,...l}=e,o=X(er,r),n=Q(er,r),i=R.useRef(null),s=(0,P.useComposedRefs)(a,i),d=o.values.length,c=o.values.map(e=>ed(e,o.min,o.max)),u=d>1?Math.min(...c):0,m=100-Math.max(...c);return(0,t.jsx)(z.Primitive.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...l,ref:s,style:{...e.style,[n.startEdge]:u+"%",[n.endEdge]:m+"%"}})});el.displayName=er;var eo="SliderThumb",en=R.forwardRef((e,a)=>{let r=K(e.__scopeSlider),[l,o]=R.useState(null),n=(0,P.useComposedRefs)(a,e=>o(e)),i=R.useMemo(()=>l?r().findIndex(e=>e.ref.current===l):-1,[r,l]);return(0,t.jsx)(ei,{...e,ref:n,index:i})}),ei=R.forwardRef((e,a)=>{let{__scopeSlider:r,index:l,name:o,...n}=e,i=X(eo,r),s=Q(eo,r),[d,c]=R.useState(null),u=(0,P.useComposedRefs)(a,e=>c(e)),m=!d||i.form||!!d.closest("form"),x=(0,V.useSize)(d),p=i.values[l],v=void 0===p?0:ed(p,i.min,i.max),f=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(l,i.values.length),g=null==x?void 0:x[s.size],h=g?function(e,t,a){let r=e/2,l=ec([0,50],[0,r]);return(r-l(t)*a)*a}(g,v,s.direction):0;return R.useEffect(()=>{if(d)return i.thumbs.add(d),()=>{i.thumbs.delete(d)}},[d,i.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:"calc(".concat(v,"% + ").concat(h,"px)")},children:[(0,t.jsx)(B.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(z.Primitive.span,{role:"slider","aria-label":e["aria-label"]||f,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...n,ref:u,style:void 0===p?{display:"none"}:e.style,onFocus:(0,H.composeEventHandlers)(e.onFocus,()=>{i.valueIndexToChangeRef.current=l})})}),m&&(0,t.jsx)(es,{name:null!=o?o:i.name?i.name+(i.values.length>1?"[]":""):void 0,form:i.form,value:p},l)]})});en.displayName=eo;var es=R.forwardRef((e,a)=>{let{__scopeSlider:r,value:l,...o}=e,n=R.useRef(null),i=(0,P.useComposedRefs)(n,a),s=(0,E.usePrevious)(l);return R.useEffect(()=>{let e=n.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(s!==l&&t){let a=new Event("input",{bubbles:!0});t.call(e,l),e.dispatchEvent(a)}},[s,l]),(0,t.jsx)(z.Primitive.input,{style:{display:"none"},...o,ref:i,defaultValue:l})});function ed(e,t,a){return(0,S.clamp)(100/(a-t)*(e-t),[0,100])}function ec(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(a-e[0])}}function eu(e){let{className:a,defaultValue:r,value:l,min:o=0,max:n=100,...i}=e,s=R.useMemo(()=>Array.isArray(l)?l:Array.isArray(r)?r:[o,n],[l,r,o,n]);return(0,t.jsxs)(W,{"data-slot":"slider",defaultValue:r,value:l,min:o,max:n,className:(0,m.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...i,children:[(0,t.jsx)(ea,{"data-slot":"slider-track",className:(0,m.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,t.jsx)(el,{"data-slot":"slider-range",className:(0,m.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(e,a)=>(0,t.jsx)(en,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},a))]})}es.displayName="RadioBubbleInput";let em=(0,f.observer)(e=>{let{poll:a,vote:r,candidate:l}=e;return(0,t.jsxs)(h.HiveMimeHoverCard,{className:"flex flex-col gap-4 !pb-4 hover:text-honey-brown",children:[(0,t.jsxs)("div",{className:"flex flex-row",children:[(0,t.jsx)("span",{className:"flex-1",children:l.name}),(0,t.jsx)("span",{className:"text-sm text-honey-brown",children:r.value})]}),(0,t.jsx)(eu,{value:[r.value],onValueChange:e=>r.value=e[0],min:a.minValue,max:a.maxValue,step:a.stepValue})]})}),ex=(0,f.observer)(e=>{let{poll:a,pollVotes:r}=e;return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("span",{className:"text-gray-500 text-sm",children:["Please score the candidates between ",a.minValue," and ",a.maxValue,"."]}),a.candidates.map((e,l)=>(0,t.jsx)(em,{vote:r.candidates[l],candidate:e,poll:a},l))]})}),ep=(0,f.observer)(e=>{let{combined:a,onClick:r}=e;function l(){return null!=a.vote.value}return(0,t.jsxs)(h.HiveMimeHoverCard,{className:"flex flex-row items-center cursor-pointer ".concat(l()?"bg-honey-brown/20":"hover:text-honey-brown"),onClick:r,children:[l()&&(0,t.jsx)("span",{className:"w-6 font-light text-gray-500",children:a.vote.value}),(0,t.jsx)(b.motion.div,{layout:!0,children:a.candidate.name})]})});var ev=e.i(31178);let ef=(0,R.createContext)(null);var eg=e.i(87022),eh=e.i(74008);let eb=e=>!e.isLayoutDirty&&e.willUpdate(!1),ey=e=>{let{children:a,id:r,inherit:l=!0}=e,o=(0,R.useContext)(ev.LayoutGroupContext),n=(0,R.useContext)(ef),[i,s]=function(){let e=function(){let e=(0,R.useRef)(!1);return(0,eh.useIsomorphicLayoutEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}(),[t,a]=(0,R.useState)(0),r=(0,R.useCallback)(()=>{e.current&&a(t+1)},[t]);return[(0,R.useCallback)(()=>eg.frame.postRender(r),[r]),t]}(),d=(0,R.useRef)(null),c=o.id||n;null===d.current&&((e=>!0==(!0===e)||"id"===e)(l)&&c&&(r=r?c+"-"+r:c),d.current={id:r,group:!0===l&&o.group||function(){let e=new Set,t=new WeakMap,a=()=>e.forEach(eb);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",a))},remove:r=>{e.delete(r);let l=t.get(r);l&&(l(),t.delete(r)),a()},dirty:a}}()});let u=(0,R.useMemo)(()=>({...d.current,forceRender:i}),[s]);return(0,t.jsx)(ev.LayoutGroupContext.Provider,{value:u,children:a})};var ej=e.i(77129);let ew=(0,f.observer)(e=>{let{poll:a,pollVotes:r}=e,[l,o]=(0,R.useState)(()=>a.candidates.map((e,t)=>({candidate:e,vote:r.candidates[t]})));function n(){return l.some(e=>null==e.vote.value)}function i(){let e=l.filter(e=>null!=e.vote.value);return e.sort((e,t)=>e.vote.value-t.vote.value),e}function s(e,t){if(-1==t&&(t=i().length+1),null!=e.vote.value)for(let t of i())t.vote.value>e.vote.value&&(t.vote.value-=1);if(null!=t)for(let e of i())e.vote.value>=t&&(e.vote.value+=1);e.vote.value=t}return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Please rank the candidates in order of preference."}),(0,t.jsxs)(ey,{children:[(0,t.jsx)(ej.HiveMimeDraggable,{droppableFor:(0,m.getReferenceId)(a),isDroppable:!0,onDropped:e=>{let{draggableData:t}=e;return s(t,-1)},canDrop:e=>null==e.vote.value,children:(0,t.jsxs)(b.motion.div,{layout:!0,className:"flex flex-col bg-honey-brown/20 p-2 rounded-md border-2 border-honey-brown/30 gap-2",children:[(0,t.jsx)(b.motion.div,{layout:"position",className:"text-sm text-center mb-2",children:"Ranked candidates"}),i().map(e=>(0,t.jsx)(b.motion.div,{layoutId:(0,m.getReferenceId)(e),children:(0,t.jsx)(ej.HiveMimeDraggable,{droppableFor:(0,m.getReferenceId)(a),draggableOn:[(0,m.getReferenceId)(a)],isDraggable:!0,isDroppable:!0,isSticky:!0,data:e,onDropped:t=>s(t.draggableData,e.vote.value+ +("bottom"===t.edge)),allowedEdges:["top","bottom"],children:(0,t.jsx)(ep,{combined:e,onClick:()=>s(e,null)})})},(0,m.getReferenceId)(e))),(0,t.jsx)(b.motion.div,{layout:!0,className:"text-muted-foreground text-center border-1 border-dashed ".concat(n()?"border-muted-foreground/20":"border-transparent"," rounded-md text-sm p-1"),children:n()?(0,t.jsxs)("span",{children:["Please select a candidate for rank ",i().length+1]}):(0,t.jsx)("span",{children:"All candidates ranked"})})]})}),(0,t.jsx)(ej.HiveMimeDraggable,{droppableFor:(0,m.getReferenceId)(a),isDroppable:!0,onDropped:e=>{s(e.draggableData,null)},canDrop:e=>null!=e.vote.value,children:(0,t.jsxs)(b.motion.div,{layout:!0,className:"flex flex-col gap-2 bg-muted-foreground/5 p-2 rounded-md border-2 border-muted-foreground/10",children:[(0,t.jsx)(b.motion.div,{layout:"position",className:"text-sm text-center mb-2",children:"Unranked candidates"}),l.filter(e=>null==e.vote.value).map(e=>(0,t.jsx)(b.motion.div,{layoutId:(0,m.getReferenceId)(e),children:(0,t.jsx)(ej.HiveMimeDraggable,{draggableOn:[(0,m.getReferenceId)(a)],isDraggable:!0,data:e,children:(0,t.jsx)(ep,{combined:e,onClick:()=>s(e,-1)})})},(0,m.getReferenceId)(e)))]})})]})]})});var eC=e.i(76639),eN=e.i(51975);function eD(e){let{className:a,children:r,...l}=e;return(0,t.jsxs)("div",{className:"flex flex-row px-2 py-1 rounded-md gap-2 text-sm items-center ".concat((0,m.cn)("",a)),...l,children:[(0,t.jsx)(eN.Tag,{className:"w-4 h-4"}),r]})}var ek=e.i(60957);function eR(e){function a(e,t){e.vote.value=t.value}return(0,t.jsx)(ej.HiveMimeDraggable,{data:e.category,isDroppable:!0,droppableFor:["".concat((0,m.getReferenceId)(e.poll),"_category")],onDropped:t=>a(t.draggableData,e.category),canDrop:t=>t.vote.value!=e.category.value,children:(0,t.jsx)(b.motion.div,{layout:!0,layoutId:(0,m.getReferenceId)(e.category),style:{backgroundColor:"".concat((0,ek.numberToColorHex)(e.category.category.color),"00"),borderColor:"".concat((0,ek.numberToColorHex)(e.category.category.color),"77")},whileHover:{backgroundColor:"".concat((0,ek.numberToColorHex)(e.category.category.color),"20"),borderColor:"".concat((0,ek.numberToColorHex)(e.category.category.color))},className:"flex flex-col border-l-6 rounded-md gap-2 p-2",children:e.candidates.map((r,l)=>(0,t.jsx)("div",{children:(0,t.jsx)(b.motion.div,{layout:!0,layoutId:(0,m.getReferenceId)(r),className:"flex flex-row",children:(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(ej.HiveMimeDraggable,{draggableOn:["".concat((0,m.getReferenceId)(e.poll),"_category")],droppableFor:["".concat((0,m.getReferenceId)(e.poll),"_candidate")],isDroppable:!0,isDraggable:!0,data:r,onDropped:e=>a(e.droppableData,e.draggableData),onClick:()=>e.candidateClicked(r),children:(0,t.jsx)(eS,{candidate:r,category:e.category})})})})},(0,m.getReferenceId)(r)))},(0,m.getReferenceId)(e.category))},(0,m.getReferenceId)(e.category))}function eS(e){let{candidate:a,category:r}=e;return(0,t.jsxs)(h.HiveMimeHoverCard,{style:{borderColor:"".concat((0,ek.numberToColorHex)(r.category.color),"77")},className:"flex flex-row gap-2 items-center cursor-pointer hover:text-honey-brown",children:[(0,t.jsx)("span",{className:"flex-1",children:a.candidate.name}),(0,t.jsx)(eH,{category:r})]})}function eH(e){let{category:a}=e;return(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(eN.Tag,{style:{color:"".concat((0,ek.numberToColorHex)(a.category.color))},className:"w-4 h-4"}),(0,t.jsx)("span",{title:a.category.name,className:"truncate max-w-32",children:a.category.name})]})}function eP(e){let{category:a,...r}=e;return(0,t.jsx)(b.motion.div,{className:"cursor-pointer border-1 rounded-md",style:{color:"".concat((0,ek.numberToColorHex)(a.category.color)),borderColor:"".concat((0,ek.numberToColorHex)(a.category.color)),backgroundColor:"".concat((0,ek.numberToColorHex)(a.category.color),"20")},whileHover:{backgroundColor:"".concat((0,ek.numberToColorHex)(a.category.color),"50")},children:(0,t.jsx)(eD,{...r,children:(0,t.jsx)("div",{className:"text-muted-foreground",children:a.category.name})})})}let eM=(0,f.observer)(e=>{let{categories:a,candidate:r,onClose:l}=e;return(0,t.jsx)(eC.Dialog,{open:null!=r,onOpenChange:()=>l(),children:(0,t.jsxs)(eC.DialogContent,{className:"gap-2",children:[(0,t.jsxs)(eC.DialogHeader,{children:[(0,t.jsxs)(eC.DialogTitle,{children:["Pick a category for ",(0,t.jsx)("span",{className:"text-honey-brown",children:null==r?void 0:r.candidate.name})]}),(0,t.jsx)(eC.DialogDescription,{children:"Please pick a category to assign the candidate to."})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:null==a?void 0:a.map(e=>(0,t.jsx)(eP,{category:e,onClick:()=>{r.vote.value=e.value,l()}},(0,m.getReferenceId)(e)))})]})})}),eI=(0,f.observer)(e=>{let{candidates:a,category:r,onClose:l}=e;return(0,t.jsx)(eC.Dialog,{open:null!=r,onOpenChange:()=>l(),children:(0,t.jsxs)(eC.DialogContent,{className:"gap-2",children:[(0,t.jsxs)(eC.DialogHeader,{children:[(0,t.jsxs)(eC.DialogTitle,{children:["Pick a candidate for ",(0,t.jsx)("span",{className:"text-honey-brown",children:null==r?void 0:r.category.name})]}),(0,t.jsx)(eC.DialogDescription,{children:"Please pick a candidate to assign the category to."})]}),null==a?void 0:a.map((e,a)=>(0,t.jsx)(h.HiveMimeHoverCard,{onClick:()=>{e.vote.value=null==r?void 0:r.value,l()},className:"cursor-pointer hover:text-honey-brown flex flex-col p-2 rounded-md border-1 gap-2",children:e.candidate.name},a))]})})}),eT=(0,f.observer)(e=>{let{poll:a,pollVotes:r}=e,[l,o]=(0,R.useState)(null),[n,i]=(0,R.useState)(null),[s,d]=(0,R.useState)(()=>a.candidates.map((e,t)=>({candidate:e,vote:r.candidates[t]}))),[c,u]=(0,R.useState)(()=>{let e=a.categories.map((e,t)=>({category:e,value:t+1}));return e.push({category:{name:"Uncategorized",color:(0,ek.colorHexToNumber)(ek.mutedColors.gray)},value:null}),e});return(0,t.jsx)(ey,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(eM,{categories:c,candidate:l,onClose:()=>o(null)}),(0,t.jsx)(eI,{candidates:s,category:n,onClose:()=>i(null)}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Please add categories to the candidates."}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:null==c?void 0:c.map((e,r)=>(0,t.jsx)(ej.HiveMimeDraggable,{data:e,droppableFor:["".concat((0,m.getReferenceId)(a),"_category")],draggableOn:["".concat((0,m.getReferenceId)(a),"_candidate")],isDroppable:!0,isDraggable:!0,onClick:()=>i(e),onDropped:t=>{var a;return a=t.draggableData,void(a.vote.value=e.value)},canDrop:t=>t.vote.value!=e.value,children:(0,t.jsx)(eP,{category:e})},(0,m.getReferenceId)(e)))}),null==c?void 0:c.map(e=>{var r;return s.some(t=>t.vote.value===e.value)&&(0,t.jsx)(eR,{poll:a,category:e,candidates:(r=e.value,s.filter(e=>e.vote.value===r)),candidateClicked:o},(0,m.getReferenceId)(e))})]})})}),eE=(0,f.observer)(e=>{let{poll:a,pollVote:r,footer:l}=e,o={[v.PollType.SingleChoice]:(0,t.jsx)(j,{poll:a,pollVotes:r}),[v.PollType.MultipleChoice]:(0,t.jsx)(k,{poll:a,pollVotes:r}),[v.PollType.Scoring]:(0,t.jsx)(ex,{poll:a,pollVotes:r}),[v.PollType.Ranking]:(0,t.jsx)(ew,{poll:a,pollVotes:r}),[v.PollType.Categorization]:(0,t.jsx)(eT,{poll:a,pollVotes:r})};return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-honey-brown",children:a.title}),(0,t.jsx)("span",{className:"text-muted-foreground",children:a.description})]}),(0,t.jsx)(w.HiveMimePollTypeIcon,{answerType:a.pollType,className:"text-gray-500 w-6 h-6 self-start"})]}),o[a.pollType],l]})});var eV=e.i(24808),ez=e.i(87444),eA=e.i(53642),e_=e.i(19455);function eL(e,t){let a=[],r=t.candidates.map(e=>e.value),l=r.filter(e=>null!=e).length;if(0==l&&!e.isOptional)return a.push("You must vote for this poll."),a;for(let t of(l<e.minVotes&&a.push("You must vote for at least ".concat(e.minVotes," candidates.")),l>e.maxVotes&&a.push("You must vote for no more than ".concat(e.maxVotes," candidates.")),r))null!=t&&(t<e.minValue&&a.push("Your candidate's value can not be smaller than ".concat(e.minValue,".")),t>e.maxValue&&a.push("Your candidate's value can not be larger than ".concat(e.maxValue,".")));return a}var eO=e.i(46696),eU=e.i(40211);let eB=(0,f.observer)(e=>{var r,o;let{post:i}=e,[s,c]=(0,R.useState)("0"),[u,x]=(0,R.useState)(()=>(0,ez.observable)({postId:i.id,polls:(i.polls||[]).map(e=>({candidates:(e.candidates||[]).map(()=>({value:null}))}))}));return(0,t.jsxs)(a.Card,{className:"py-4",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"flex flex-row gap-2",children:(0,t.jsxs)("span",{className:"text-gray-500 text-sm",children:["User has ",null==(r=i.polls)?void 0:r.length," poll",(null==(o=i.polls)?void 0:o.length)===1?"":"s"," for you"]})}),(0,t.jsx)("span",{className:"font-bold text-honey-brown",children:i.title})]})})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:i.description}),(0,t.jsxs)(eV.EmbeddedTabs,{value:s,onValueChange:e=>c(e),children:[(0,t.jsxs)(eV.EmbeddedTabsList,{className:"mt-4",children:[i.polls.map((e,a)=>(0,t.jsx)(eV.EmbeddedTabsTrigger,{value:"".concat(a),children:a+1},(0,m.getReferenceId)(e))),(0,t.jsx)(eV.EmbeddedTabsTrigger,{value:"".concat(i.polls.length),children:"Overview"},"overview")]}),i.polls.map((e,a)=>(0,t.jsx)(eV.EmbeddedTabsContent,{value:"".concat(a),children:(0,t.jsx)(eE,{poll:e,pollVote:u.polls[a],footer:(0,t.jsxs)(e_.Button,{className:"w-full flex-1 text-honey-brown",variant:"outline",onClick:()=>c("".concat(a+1)),disabled:eL(e,u.polls[a]).length>0,children:["Next",(0,t.jsx)(d,{})]})})},(0,m.getReferenceId)(e))),(0,t.jsx)(eV.EmbeddedTabsContent,{value:"".concat(i.polls.length),children:(0,t.jsx)(eK,{post:i,vote:u})},"overview")]})]}),(0,t.jsx)(a.CardFooter,{children:(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsxs)(p,{variant:"outline",children:[(0,t.jsx)(n,{}),"128"]}),(0,t.jsxs)(p,{variant:"outline",children:[(0,t.jsx)(l,{height:241}),"64"]})]})})]})}),eK=(0,f.observer)(e=>{let{post:a,vote:r}=e,l=(0,R.useContext)(eA.HiveMimeApiContext),[n,d]=(0,R.useState)(()=>a.polls.map(()=>[])),[c,u]=(0,R.useState)(!0);async function x(){await l.api.pollVoteCreate(a.id.toString(),r),eO.toast.success("Your vote has been submitted.")}return(0,R.useEffect)(()=>{!function(){let e=[];for(let t=0;t<a.polls.length;t++){let l=eL(a.polls[t],r.polls[t]);e.push(l),l.length>0&&u(!1)}d(e)}(),console.log(n)},[r]),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[a.polls.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col gap-2 p-2 border rounded-md text-muted-foreground text-sm",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[n[a].length>0?(0,t.jsx)(s,{className:"h-4 w-4 text-red-400"}):(0,t.jsx)(i,{className:"h-4 w-4 text-green-700"}),(0,t.jsxs)("span",{children:["Poll ",a+1,": ",e.title]})]}),n[a].length>0&&(0,t.jsx)(eU.HiveMimeBulletItem,{className:"pl-1 text-red-400",children:n[a].map((e,a)=>(0,t.jsx)("div",{children:e},a))})]},(0,m.getReferenceId)(e))),(0,t.jsxs)(e_.Button,{className:"w-full flex-1 text-honey-brown",variant:"outline",onClick:x,disabled:!c,children:[(0,t.jsx)(o,{}),"Submit vote"]})]})});var eF=e.i(2747);function eY(){let e=(0,R.useContext)(eA.HiveMimeApiContext),[a,r]=(0,R.useState)([]),[l,o]=(0,R.useState)(!1);async function n(){o(!0),r((await e.api.postBrowseList()).data),o(!1)}return(0,R.useEffect)(()=>{n()},[]),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"w-full max-w-183 flex flex-col gap-4",children:[a.map((e,a)=>(0,t.jsx)(eB,{post:e},a)),l&&(0,t.jsx)("div",{children:(0,t.jsx)(eF.Skeleton,{className:"h-64 w-full rounded-xl",children:(0,t.jsx)("span",{className:"flex h-full w-full items-center justify-center text-gray-500",children:"Loading..."})})})]})})}}]);