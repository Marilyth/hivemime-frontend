(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30525,e=>{"use strict";e.s(["default",()=>k],30525);var l=e.i(43476),s=e.i(15288),a=e.i(27612),t=e.i(19455),n=e.i(87675),i=e.i(10204),r=e.i(93479);function o(e){let{label:s,isRequired:a,...t}=e;return(0,l.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,l.jsxs)(i.Label,{htmlFor:t.id,children:[s,a&&(0,l.jsx)("span",{className:"text-honey-brown",children:"*"})]}),(0,l.jsx)(r.Input,{...t})]})}e.i(71470);var c=e.i(41721),d=e.i(72436),x=e.i(48800),p=e.i(85272);let u=(0,c.observer)(e=>{let{poll:s}=e,a=[{value:n.PollType.SingleChoice,description:"The user has to pick one out of several candidates."},{value:n.PollType.MultipleChoice,description:"The user has to pick one or more out of several candidates."},{value:n.PollType.Rating,description:"The user has to assign each candidate a numerical value within a specified range."},{value:n.PollType.Ranking,description:"The user has to rank the candidates in order of preference. (E.g. top 10 lists)"},{value:n.PollType.Categorization,description:"The user has to assign a category to each candidate. (E.g. tier lists)"}];return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Choose the type of poll you wish to create."}),a.map((e,a)=>(0,l.jsxs)(x.HiveMimeHoverCard,{className:"flex flex-row cursor-pointer hover:text-honey-brown",onClick:()=>s.pollType=e.value,children:[(0,l.jsx)(p.HiveMimePollTypeIcon,{answerType:e.value,className:"mr-2 text-gray-500 w-8"}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,l.jsx)("span",{children:e.value}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:e.description})]})]},a))]})});var h=e.i(7233),v=e.i(73741);let m=(0,c.observer)(e=>{let{className:s,...a}=e;return(0,l.jsx)(r.Input,{className:"!bg-transparent !ring-offset-transparent border-0 shadow-none focus-visible:ring-0 p-0 ".concat(s),...a})});var j=e.i(71645);function f(e){let{index:s,onIndexChange:a}=e,[t,n]=(0,j.useState)(s);return(0,l.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,l.jsx)(m,{type:"number",className:"p-0 w-8 text-gray-500",value:t,onChange:e=>{var l;n(l=Math.max(1,l=Number(e.target.value))),null==a||a(l)}})})}let g=(0,c.observer)(e=>{let{index:s,option:a}=e;return(0,l.jsxs)(x.HiveMimeHoverCard,{className:"flex flex-row gap-2",children:[(0,l.jsx)(f,{index:s}),(0,l.jsx)(m,{value:a.name,onChange:e=>a.name=e.target.value})]})}),b=(0,c.observer)(e=>{let{poll:s}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(v.Label,{children:"Candidates"}),s.candidates.map((e,n)=>(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(g,{option:e,index:n})}),(0,l.jsx)(t.Button,{disabled:s.candidates.length<=2,variant:"ghost",className:"ml-2 text-muted-foreground hover:text-red-400",onClick:()=>{s.candidates.length>2&&s.candidates.splice(n,1)},children:(0,l.jsx)(a.Trash2,{})})]},n)),(0,l.jsxs)(t.Button,{variant:"outline",onClick:function(){var e;null==(e=s.candidates)||e.push({name:"Candidate ".concat(s.candidates.length+1),description:""})},children:[(0,l.jsx)(h.Plus,{}),"Add candidate"]})]})}),T=(0,c.observer)(e=>{let{poll:s,canDelete:i,onDeleteRequested:r}=e,c={[n.PollType.SingleChoice]:(0,l.jsx)(b,{poll:s}),[n.PollType.MultipleChoice]:(0,l.jsx)("span",{children:"ToDo"}),[n.PollType.Rating]:(0,l.jsx)("span",{children:"ToDo"}),[n.PollType.Ranking]:(0,l.jsx)("span",{children:"ToDo"}),[n.PollType.Categorization]:(0,l.jsx)("span",{children:"ToDo"})};return(0,l.jsx)("div",{children:void 0==s.pollType&&(0,l.jsx)(u,{poll:s})||(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-end",children:[(0,l.jsx)(o,{label:"Question",placeholder:"My poll's title",value:s.title,onChange:e=>s.title=e.target.value}),(0,l.jsx)(t.Button,{disabled:!i,variant:"ghost",className:"text-muted-foreground hover:text-red-400",onClick:r,children:(0,l.jsx)(a.Trash2,{})})]}),(0,l.jsx)(o,{label:"Description",placeholder:"My poll's description",value:s.description,onChange:e=>s.description=e.target.value}),(0,l.jsxs)("div",{className:"flex flex-row items-center mt-8",children:[(0,l.jsx)(d.Separator,{className:"flex-1"}),(0,l.jsx)(t.Button,{variant:"link",className:"border-1 cursor-pointer text-honey-brown",onClick:()=>s.pollType=void 0,children:(0,l.jsx)(p.HiveMimePollTypeIcon,{answerType:s.pollType})}),(0,l.jsx)(d.Separator,{className:"flex-1"})]}),c[s.pollType]]})})});var C=e.i(24808),y=e.i(53642),N=e.i(75157),w=e.i(18566);let P=(0,c.observer)(()=>{let e=(0,j.useContext)(y.HiveMimeApiContext),[a,n]=(0,j.useState)("1"),i=(0,j.useRef)((0,N.createObservable)({title:"",description:"",polls:[]})).current;function r(){var e;null==(e=i.polls)||e.push({title:"",description:"",candidates:[]}),n("".concat(i.polls.length))}async function c(){await e.api.postCreateCreate(i),(0,w.redirect)("/home")}return 0===i.polls.length&&r(),(0,l.jsxs)(s.Card,{className:"py-4",children:[(0,l.jsx)(s.CardHeader,{children:(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Create new post"})}),(0,l.jsx)(s.CardContent,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(o,{isRequired:!0,label:"Title",placeholder:"My title",value:i.title,onChange:e=>i.title=e.target.value}),(0,l.jsx)(o,{label:"Description",placeholder:"My description",value:i.description,onChange:e=>i.description=e.target.value}),(0,l.jsx)(d.Separator,{className:"mt-8",orientation:"horizontal"}),(0,l.jsx)(v.Label,{children:"Polls"}),(0,l.jsxs)(C.EmbeddedTabs,{value:a,onValueChange:n,children:[(0,l.jsx)(C.EmbeddedTabsList,{actionComponent:(0,l.jsxs)(t.Button,{variant:"outline",className:"rounded-b-none border-b-0",onClick:r,children:[(0,l.jsx)(h.Plus,{}),"Add"]}),children:i.polls.map((e,s)=>(0,l.jsx)(C.EmbeddedTabsTrigger,{value:"".concat(s+1),children:s+1},s))}),i.polls.map((e,s)=>(0,l.jsx)(C.EmbeddedTabsContent,{value:"".concat(s+1),children:(0,l.jsx)(T,{poll:e,canDelete:i.polls.length>1,onDeleteRequested:()=>(function(e){var l;null==(l=i.polls)||l.splice(e,1),e>=i.polls.length&&n("".concat(e))})(s)})},s))]})]})}),(0,l.jsx)(s.CardFooter,{children:(0,l.jsx)(t.Button,{disabled:!function(){var e;return!(void 0==i.title||""===i.title.trim()||(null==(e=i.polls)?void 0:e.some(e=>{var l;return void 0==e.pollType||(null==(l=e.candidates)?void 0:l.length)==0})))}(),onClick:c,children:"Submit"})})]})});function k(){return(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("div",{className:"w-full max-w-183 flex flex-col gap-4",children:(0,l.jsx)(P,{})})})}}]);